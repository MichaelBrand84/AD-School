<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>AutoDiff - 7&nbsp; Reflexion</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./ausblick.html" rel="prev">
<link href="./mycover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./reflexion.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Reflexion</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./mycover.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AutoDiff</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Ableitungen und ihre Anwendungen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notAD.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">AD ist nicht …</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ADOneDimManually.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Standard Algorithmische Differentiation für Funktionen einer Variablen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./HigherDimFunctions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Funktionen mit mehreren In- und Outputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Adjungierte Algorithmische Differentiation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ausblick.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ausblick: Moderne Bibliotheken für automatische Differentiation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reflexion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Reflexion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literaturverzeichnis</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#reflexion-zur-lerneinheit" id="toc-reflexion-zur-lerneinheit" class="nav-link active" data-scroll-target="#reflexion-zur-lerneinheit"><span class="header-section-number">7.1</span> Reflexion zur Lerneinheit</a>
  <ul class="collapse">
  <li><a href="#reflexion-zu-den-klassen-und-beispielprogrammen" id="toc-reflexion-zu-den-klassen-und-beispielprogrammen" class="nav-link" data-scroll-target="#reflexion-zu-den-klassen-und-beispielprogrammen"><span class="header-section-number">7.1.1</span> Reflexion zu den Klassen und Beispielprogrammen</a></li>
  <li><a href="#was-noch-fehlt" id="toc-was-noch-fehlt" class="nav-link" data-scroll-target="#was-noch-fehlt"><span class="header-section-number">7.1.2</span> Was noch fehlt</a></li>
  </ul></li>
  <li><a href="#reflexion-zum-einsatz-im-unterricht" id="toc-reflexion-zum-einsatz-im-unterricht" class="nav-link" data-scroll-target="#reflexion-zum-einsatz-im-unterricht"><span class="header-section-number">7.2</span> Reflexion zum Einsatz im Unterricht</a>
  <ul class="collapse">
  <li><a href="#voraussetzungen-für-die-einzelnen-kapitel" id="toc-voraussetzungen-für-die-einzelnen-kapitel" class="nav-link" data-scroll-target="#voraussetzungen-für-die-einzelnen-kapitel"><span class="header-section-number">7.2.1</span> Voraussetzungen für die einzelnen Kapitel</a></li>
  <li><a href="#durchführung-der-lerneinheit" id="toc-durchführung-der-lerneinheit" class="nav-link" data-scroll-target="#durchführung-der-lerneinheit"><span class="header-section-number">7.2.2</span> Durchführung der Lerneinheit</a></li>
  <li><a href="#potential-für-den-mathematikunterricht" id="toc-potential-für-den-mathematikunterricht" class="nav-link" data-scroll-target="#potential-für-den-mathematikunterricht"><span class="header-section-number">7.2.3</span> Potential für den Mathematikunterricht</a></li>
  <li><a href="#potential-für-den-informatikunterricht" id="toc-potential-für-den-informatikunterricht" class="nav-link" data-scroll-target="#potential-für-den-informatikunterricht"><span class="header-section-number">7.2.4</span> Potential für den Informatikunterricht</a></li>
  <li><a href="#verbesserungen-für-künftige-klassen" id="toc-verbesserungen-für-künftige-klassen" class="nav-link" data-scroll-target="#verbesserungen-für-künftige-klassen"><span class="header-section-number">7.2.5</span> Verbesserungen für künftige Klassen</a></li>
  </ul></li>
  <li><a href="#was-ich-persönlich-gelernt-habe" id="toc-was-ich-persönlich-gelernt-habe" class="nav-link" data-scroll-target="#was-ich-persönlich-gelernt-habe"><span class="header-section-number">7.3</span> Was ich persönlich gelernt habe</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-reflexion" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Reflexion</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="reflexion-zur-lerneinheit" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="reflexion-zur-lerneinheit"><span class="header-section-number">7.1</span> Reflexion zur Lerneinheit</h2>
<section id="reflexion-zu-den-klassen-und-beispielprogrammen" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="reflexion-zu-den-klassen-und-beispielprogrammen"><span class="header-section-number">7.1.1</span> Reflexion zu den Klassen und Beispielprogrammen</h3>
<p>Die in der Lerneinheit entwickelten Klassen sind ein Produkt meines eigenen Lernprozesses. Im Nachhinein würde ich einige Funktionen anders implementieren. Die im <a href="aad.html#sec-AADmitOperatorOverloading"><span>Kapitel&nbsp;5.2</span></a> verwendete Methode, zuerst eine Funktion für die Operation zu definieren und damit den Operator zu überladen, ist insgesamt übersichtlicher, als die direkte Methode, die in <a href="ADOneDimManually.html#sec-SadImplementationOperatorOverloading"><span>Kapitel&nbsp;3.2</span></a> verwendet wurde. Die grösste Herausforderung war die Klasse <code>FloatAad</code> aus Kapitel <a href="aad.html#sec-AADmitOperatorOverloading"><span>Kapitel&nbsp;5.2</span></a>, obwohl ich hier auf die gut geschriebene Einführung von <span class="citation" data-cites="sidsite2021">Radcliffe (<a href="references.html#ref-sidsite2021" role="doc-biblioref">2021</a>)</span> zurückgreifen konnte. Das Bedürfnis nach weiteren Funktionalitäten wie <code>getGradient</code> oder <code>getJacobian</code> ergab sich erst später in Anwendungen und mussten nachträglich ergänzt werden. Schwierigkeiten bereitete dabei oft das Zusammenspiel zwischen meiner eigenen Klasse und <code>numpy</code>, weil Funktionen wie <code>getDerivatives</code> auf das Attribut <code>y.derivatives</code> zugreifen, die ein <code>np.array</code> nicht besitzt. Hier den Überblick zu behalten war nicht immer einfach.</p>
<p>Bei der Darstellung der Theorie und den Programmen legte ich den Fokus auf das Verständnis der Methode und nicht auf eine effiziente Implementierung. Die Auswertung der Ableitung geschieht zwar effizient, auch in der AAD Methode, allerdings werden dabei viele Hilfsvariablen angelegt. Die dafür benötigten Speicherzugriffe sind nehmen dabei mehr Zeit in Anspruch, als die eigentliche Berechnung (<span class="citation" data-cites="Griewank2008EDP">Griewank und Walther (<a href="references.html#ref-Griewank2008EDP" role="doc-biblioref">2008</a>)</span>, S. 61). AD-Implementationen in modernen Programmiersprachen wie Julia versuchen, diese Probleme zu verhindern (<span class="citation" data-cites="Baydin18">Baydin u.&nbsp;a. (<a href="references.html#ref-Baydin18" role="doc-biblioref">2018</a>)</span>, S. 22).</p>
<p>Bei der gezeigten Implementation der AAD in <a href="aad.html#sec-AADmitOperatorOverloading"><span>Kapitel&nbsp;5.2</span></a> stösst man schnell an Grenzen, weil durch den rekursiven Aufruf von <code>computeDerivatives</code> die maximale Rekursionstiefe überschritten wird. Dies merkt man am deutlichsten am Beispiel des Schärfens von Bildern in <a href="aad.html#sec-deblurringImages"><span>Kapitel&nbsp;5.3.3</span></a>. Dort musste die Auflösung des Bildes auf 30 <span class="math inline">\(\times\)</span> 30 Pixel reduziert und die Farbinformation entfernt werden. Abhilfe könnte hier die Überladung der <code>numpy</code>-Operatoren bieten, so dass Arrays bestehend aus <code>FloatAad</code>-Objekten miteinander verknüpft werden können, ohne die einzelnen Elemente zu entpacken.</p>
</section>
<section id="was-noch-fehlt" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="was-noch-fehlt"><span class="header-section-number">7.1.2</span> Was noch fehlt</h3>
<p>Hier gäbe es noch ganz viel zu sagen. Das zeigt allein die Tatsache, dass jedes Buch der im Vorwort erwähnten Standardliteratur mehrere hundert Seiten dick ist. Eine Frage, die sich früher oder später den Schüler:innen stellen wird ist, ob man auch die zweite oder höhere Ableitungen mit AD-Methoden berechnen kann. Die kurze Antwort lautet: Ja! Wir beschränken uns an dieser Stelle aber auf ein Zitat aus <span class="citation" data-cites="Naumann2012TAo">Naumann (<a href="references.html#ref-Naumann2012TAo" role="doc-biblioref">2012</a>)</span> (S. 91):</p>
<blockquote class="blockquote">
<p>Forward and reverse modeAD transform implementations of multivariate vector functions into tangent-linear and adjoint code. The reapplication of the same ideas yields higher derivative code. Second- and higher-order tangent-linear code is obtained by recursive application of forward mode AD. Sequences of applications of forward and reverse mode that involve at least one application of reverse mode result in higher-order adjoint code. An exponential number of combinations can be considered, for example, fourth-order adjoint code generated in forward-over-reverse-over-forward-over-reverse mode.</p>
</blockquote>
</section>
</section>
<section id="reflexion-zum-einsatz-im-unterricht" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="reflexion-zum-einsatz-im-unterricht"><span class="header-section-number">7.2</span> Reflexion zum Einsatz im Unterricht</h2>
<section id="voraussetzungen-für-die-einzelnen-kapitel" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="voraussetzungen-für-die-einzelnen-kapitel"><span class="header-section-number">7.2.1</span> Voraussetzungen für die einzelnen Kapitel</h3>
<p>Zu Beginn der Lerneinheit in <a href="intro.html"><span>Kapitel&nbsp;1</span></a> sollten Schüler:innen die Ableitungen aller Grundfunktionen und die Ableitungsregeln kennen. Diese werden im <a href="intro.html#sec-AbleitungenUebersicht"><span>Kapitel&nbsp;1.2</span></a> nochmals kurz zusammengefasst. Die hyperbolischen Funktionen werden der vollständigkeit halber ebenfalls erwähnt, im Rest der Arbeit werden sie aber nicht verwendet. In <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a> werden das Newtonverfahren und die Gradient Descent Methode kurz eingeführt, es macht aber Sinn, diese Verfahren vorher im Unterricht ausführlicher zu behandeln. Alternativ kann dieser Abschnitt auch weggelassen werden. Aus dem Programmierunterricht sollte das Konzept einer Funktion mit Rückgabewert und die Verwendung von Bibliotheken bekannt sein. Im <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a> wird ausserdem das Modul <code>matplotlib</code> verwendet, das vorgängig installiert werden muss. Alle Programme, ausser denen, die dieses Modul verwenden, können auch in <a href="https://tigerjython.ch/">TigerJython</a> ausgeführt werden.</p>
<p>In <a href="notAD.html"><span>Kapitel&nbsp;2</span></a> wird das Modul <code>sympy</code> verwendet, das vorgängig installiert werden muss. Dieser Abschnitt kann auch übersprungen werden.</p>
<p><a href="ADOneDimManually.html"><span>Kapitel&nbsp;3</span></a> kann mit den gleichen Voraussetzungen wie <a href="intro.html"><span>Kapitel&nbsp;1</span></a> bearbeitet werden. Für die <a href="ADOneDimManually.html#exr-SADmitSchleife">Übungsaufgabe&nbsp;<span>3.6</span></a> sollte die <code>for</code>-Schleife bekannt sein. <a href="ADOneDimManually.html#exr-BillardSADmanualSOlution">Übungsaufgabe&nbsp;<span>3.7</span></a> und <a href="ADOneDimManually.html#exr-MinDistlSolution">Übungsaufgabe&nbsp;<span>3.9</span></a> beziehen sich auf die entsprechenden Aufgaben im <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a>. In <a href="ADOneDimManually.html#sec-SadImplementationOperatorOverloading"><span>Kapitel&nbsp;3.2</span></a> werden Klassen und das Überladen von Operatoren verwendet, um AD zu implementieren. Wenn die Schüler:innen damit noch nicht vertraut sind, kann das Konzept auch am Beispiel der AD eingeführt werden, wobei sicherlich zusätzliche Erklärungen durch die Lehrperson nötig sein werden. In <a href="ADOneDimManually.html#sec-sadPowerOperator"><span>Kapitel&nbsp;3.2.5</span></a> benötigt man logarithmisches Differenzieren. Die Methode wir dort im Detail vorgeführt, falls sie jedoch nicht aus dem Mathematikunterricht bekannt ist, ist es sinnvoll, einige zusätzliche Übungsaufgaben dazu bereit zu stellen. Die <a href="ADOneDimManually.html#exr-billardMathsadSolutions">Übungsaufgabe&nbsp;<span>3.22</span></a> und <a href="ADOneDimManually.html#exr-minDistSolutionWithSAD">Übungsaufgabe&nbsp;<span>3.23</span></a> beziehen sich wiederum auf die entsprechenden Aufgaben in <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a>.</p>
<p><a href="HigherDimFunctions.html"><span>Kapitel&nbsp;4</span></a>, <a href="aad.html"><span>Kapitel&nbsp;5</span></a> und <a href="ausblick.html"><span>Kapitel&nbsp;6</span></a> setzen höherdimensionale Analysis, wie sie in einer Analysis 2 Vorlesung im ersten Studienjahr eingeführt werden, voraus. Insbesondere die Begriffe des Gradienten und der Jacobi Matrix sollten bekannt sein. Es wird in den Kapiteln auf Literatur verwiesen, in denen diese Begriffe kurz erklärt werden. Nichtsdestotrotz sollten auch diese Abschnitte für interessierte und leistungsstarke Schüler:innen zugänglich sein. Sie beinhalten weniger Übungsaufgaben und sind mehr als Ausblick für Interessierte gedacht. Es wird hier vom Modul <code>numpy</code> Gebrauch gemacht, das vorgängig installiert werden muss. Die benötigten Funktionen aus <code>numpy</code> werden ohne Kommentare verwendet. Im <a href="ausblick.html"><span>Kapitel&nbsp;6</span></a> vergleichen wir unsere Klassen mit <code>autograd</code>, welches in <code>pytorch</code> enthalten ist. Dieses muss ebenfalls installiert werden (<span class="citation" data-cites="PyTorch">Paszke u.&nbsp;a. (<a href="references.html#ref-PyTorch" role="doc-biblioref">2019</a>)</span>).</p>
</section>
<section id="durchführung-der-lerneinheit" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="durchführung-der-lerneinheit"><span class="header-section-number">7.2.2</span> Durchführung der Lerneinheit</h3>
<p>Ich habe Teile der Lerneinheit mit zwei Schulklassen durchgeführt. Die erste war eine 6. Klasse (Abschlussjahrgang des Langzeitgymnasiums) des Ergänzungsfachs Informatik. Ich unterrichtete die Klasse zwar nicht selber, aber im 2. Semester des Abschlussjahrs führen wir in den Ergänzungsfächern eine Sonderwoche durch, während der ich einen Tag gestaltet hatte. Die Klasse hatte Erfahrung in der Programmierung mit Java, aber nicht mit Python und auch objektorientierte Programmierung war vorher erst angeschnitten worden.</p>
<p>Als Einstieg und Motivation für das Thema wählte ich das Newtonverfahren. Einige der Schüler:innen besuchten das Schwerpunktfach Physik/Anwendungen der Mathematik, in dem ich das Newtonverfahren bereits eingeführt hatte. Für die anderen beschränkte ich mich auf die Herleitung der Iterationsvorschrift und die Visualisierung mit GeoGebra im <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a>. Dass es auch Funktionen gibt, die sich nicht so leicht als eine einzeilige kompakte Formel hinschreiben lassen, wird schön durch das Billardproblem in <a href="intro.html#exm-Billard">Beispiel&nbsp;<span>1.2</span></a> illustriert.</p>
<p>Da noch nicht alle Schüler:innen mit Python programmiert hatten, folgte als nächstes eine kurze Einführung in die Syntax. Als Programmierumgebung habe ich <a href="https://codeboard.io/">Codeboard.io</a> verwendet, welches im Browser verwendet werden kann und im Gegensatz zu <a href="https://tigerjython.ch/">TigerJython</a> auch <code>numpy</code> und <code>matplotlib</code> unterstützt. Bei letzterer muss allerdings die Ausgabe als Bild abgespeichert werden und dann auf der Konsole ausgedruckt werden. Das folgende einfache Beispiel verdeutlicht das Vorgehen:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">'plot.png'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;img width=</span><span class="ch">\"</span><span class="st">350px</span><span class="ch">\"</span><span class="st"> src=</span><span class="ch">\"</span><span class="st">/resources/plot.png</span><span class="ch">\"</span><span class="st">&gt;"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um mit der Lerneinheit starten zu können, reicht es zu wissen, wie Bibliotheken wie z.B. <code>math</code> eingebunden werden und wie Funktionen definiert werden. Die Konzepte waren den Schüler:innen bekannt, nur die Syntax war neu, weshalb ich bei der Einführung gleich die Beispiele aus <a href="intro.html#sec-ProgFunc"><span>Kapitel&nbsp;1.3</span></a> verwendete. Die Übungsaufgaben dieses Kapitels reichten auch schon aus, um sich mit der Syntax vertraut zu machen. Die Schüler:innen bearbeiteten danach selbständig die Aufgaben im <a href="intro.html#sec-ProgFunc"><span>Kapitel&nbsp;1.3</span></a> und die schnelleren unter ihnen beschäftigten sich danach auch mit den Übungen im <a href="intro.html#sec-NumerischeVerfahren"><span>Kapitel&nbsp;1.4</span></a>. Das <a href="notAD.html"><span>Kapitel&nbsp;2</span></a> diskutierten wir danach kurz im Plenum, bevor sich die Schüler:innen in Paaren mit <a href="ADOneDimManually.html#sec-SadManualImplementation"><span>Kapitel&nbsp;3.1</span></a> beschäftigten. Mit dem verlinkten GeoGebra App kann man die Korrektheit der Ausgabe für beliebige Funktionen überprüfen und ist nicht auf die Beispiele und Übungen beschränkt. Die Übungsaufgaben, die sich auf das Newtonverfahren und das Gradient Descent Verfahren beziehen, wurden wiederum nur von den schnelleren Schüler:innen bearbeitet.</p>
<p>Nach der Mittagspause widmeten wir uns dem <a href="ADOneDimManually.html#sec-SadImplementationOperatorOverloading"><span>Kapitel&nbsp;3.2</span></a> zu. Der Begriff der Klasse war den Schüler:innen aus Java bekannt, sie hatten jedoch noch nicht viel Erfahrung mit dem Schreiben von eigenen Klassen und das für Python typische Operator Overloading war neu. Daher habe ich durch die ersten Abschnitte bis zur Implementation des Additionsoperators (<a href="ADOneDimManually.html#sec-implementAddSubtract"><span>Kapitel&nbsp;3.2.3</span></a>) geführt und ausführlichere Erklärungen gegeben, als im Skript. Danach konnten sie wieder selbständig weiterarbeiten. Es gibt natürlich viele Aspekte der objektorientierten Programmierung, die in dieser Lerneinheit gar nicht angesprochen wurden, aber die Schüler:innen hatten ein erstes Erfolgserlebnis, bis zum Ende des Tages ihre erste funktionierende Klasse programmiert zu haben.</p>
<p>Die zweite Durchführung geschah in einer 5. Klasse des Schwerpunktfaches Physik/Anwendungen der Mathematik, die ich selber unterrichte. Im Gegensatz zur 6. Klasse war diese die erste, welche im Vorjahr eine Einführung in Python im Rahmen des obligatorischen Fachs Informatik hatte. Wir beschäftigten uns vorher mit Anwendungen der Differentialrechnung und insbesondere mit dem Newtonverfahren. Es bot sich daher an, Algorithmisches Differenzieren als eine Ergänzung zu behandeln. Dies geschah im regulären Unterricht während insgesammt drei Doppellektionen à 90 Minuten. Da im Grundlagenfach zu diesem Zeitpunkt auch Optimierungsaufgaben besprochen wurden, habe ich die <a href="intro.html#exr-OptimierungsproblemProgrammieren">Übungsaufgabe&nbsp;<span>1.1</span></a> als Einstieg ergänzt.</p>
<p>In der ersten Doppellektion beschäftigten wir uns mit <a href="intro.html"><span>Kapitel&nbsp;1</span></a>, diesmal in chronologischer Abfolge. Das Newtonverfahren hatten wir bereits früher programmiert und dabei die Funktion jeweils “von Hand” abgeleitet, d.h. neben der Funktion <code>f</code> auch eine Funktion <code>df</code> definiert. Ich beauftragte die Schüler:innen, eine Methode zu entwickeln, die die Ableitung automatisch berechnet. Die Idee, den Wert der Ableitung durch einen Differenzenquotienten mit kleinem <code>h</code> zu approximieren, kam wider erwarten erst, als ich den Hinweis gab, dass wir die Funktion nur an einer bestimmten Stelle auszuwerten brauchen und die Definition der Ableitung in Erinnerung gerufen hatte. Der Fokus der Schüler:innen lag zunächst nur auf dem Anwenden von Ableitungsregeln.</p>
<p>In der zweiten Lektion konnte ich hier anknüpfen und <a href="notAD.html"><span>Kapitel&nbsp;2</span></a> besprechen. Danach bearbeiteten die Schüler:innen wieder selbständig das <a href="ADOneDimManually.html#sec-SadManualImplementation"><span>Kapitel&nbsp;3.1</span></a>. Im Gegensatz zum Ergänzungsfach legte ich den Fokus etwas stärker auf das Newtonverfahren und die Lösung des Billardproblems, da sie mit dieser Fragestellung bereits vertraut waren.</p>
<p>Die dritte Lektion benutzten wir dazu, die angefangenen Übungsaufgaben abzuschliessen und ich gab in Form eines Lehrervortrags einen Ausblick auf die <a href="HigherDimFunctions.html"><span>Kapitel&nbsp;4</span></a> und <a href="aad.html"><span>Kapitel&nbsp;5</span></a>, welche einige Anwendungen der AD aufzeigen.</p>
<p>Meine Hoffnung haben sich damit weitestgehend erfüllt, dass die vorliegende Arbeit sowohl im Informatik- wie auch im Mathematikunterricht gewinnbringend eingesetzt werden kann. Allerdings habe ich sie erst mit Schüler:innen durchgeführt, die sich für eines von diesen oder für beide Fächer entschieden haben. Der eigentliche Test, nämlich der Einsatz in einem Grundlagenfach mit allen Schüler:innen, ist noch ausstehend.</p>
</section>
<section id="potential-für-den-mathematikunterricht" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="potential-für-den-mathematikunterricht"><span class="header-section-number">7.2.3</span> Potential für den Mathematikunterricht</h3>
<p>Bevor ich mit der Einführung von Differentialrechnung beginne, mache ich mit der Klasse häufig Übungen, in denen die Schüler:innen mathematische Terme möglichst präzise beschreiben sollen. Der Term <span class="math inline">\(\frac{2+\sqrt x}{x^2-2^x}\)</span> kann beispielsweise so beschrieben werden:</p>
<blockquote class="blockquote">
<p>Der Term ist ein Quotient. Der Dividend ist eine Summe, deren erster Summand die Konstante Zwei und deren zweiter Summand die Quadratwurzel von <span class="math inline">\(x\)</span> ist. Der Divisor ist eine Differenz. Der Minuend ist die zweite Potenz von <span class="math inline">\(x\)</span> und der Subtrahend ist die Exponentialfunktion zur Basis Zwei.</p>
</blockquote>
<p>Das Ziel dieser Übung ist nicht nur, sich die Fachbegriffe anzueignen, sondern auch, die Struktur eines mathematischen Ausdrucks zu erfassen. Das ist nicht nur für das Lösen von Gleichungen, sondern insbesondere auch für die korrekte Anwendung der Ableitungsregeln notwendig. Ich habe festgestellt, dass das regelmässige Durchführen solcher Übungen die Häufigkeit von Fehlern in Ableitungen verkleinert. Angeregt zu solchen Übungen wurde ich durch Josef Züger von der Bündner Kantonsschule.</p>
<p>Die <a href="intro.html#exr-OptimierungsproblemNachKonvention">Übungsaufgabe&nbsp;<span>1.2</span></a>, <a href="intro.html#exr-ProgToFun">Übungsaufgabe&nbsp;<span>1.3</span></a> und <a href="intro.html#exr-FunToGraphProg">Übungsaufgabe&nbsp;<span>1.4</span></a>, bei denen die Berechnung eines Ausdrucks in elementare Schritte zerlegt wird, erfüllen den gleichen Zweck.</p>
<p>Wie das Beispiel zu Beginn von <a href="ADOneDimManually.html#sec-SadManualImplementation"><span>Kapitel&nbsp;3.1</span></a> zeigt, ist das manuelle Durchführen der SAD eine gute Übung zur Anwendung der Kettenregel und der anderen Ableitungsregeln. Da an vielen Schulen nun alle Schüler:innen aus dem Fach Informatik mit Python vertraut sind, können Aufgaben wie <a href="ADOneDimManually.html#exr-ErstesADBspErweitern">Übungsaufgabe&nbsp;<span>3.1</span></a>, <a href="ADOneDimManually.html#exr-SADKostenfunktionManuell">Übungsaufgabe&nbsp;<span>3.2</span></a> und <a href="ADOneDimManually.html#exr-SADProduktregel">Übungsaufgabe&nbsp;<span>3.3</span></a> auch als Ergänzung im Mathematikunterricht eingesetzt werden, oder sogar als Motivation für die Einführung der Kettenregel dienen.</p>
<p>Wie im <a href="ADOneDimManually.html#sec-sadPowerOperator"><span>Kapitel&nbsp;3.2.5</span></a> gezeigt wird, bietet die AD auch eine Motivation, logarithmisches Differenzieren zu behandeln. An unserer Schule haben wir das vor einigen Jahren aus dem Curriculum gestrichen - nicht nur aus Zeitgründen, sondern auch, weil Schüler:innen nach einiger Zeit müde werden, noch eine Ableitungsregel zu lernen, die später ohnehing fast nicht mehr gebraucht wurde.</p>
<p>Schliesslich bietet die AD, wie schon an mehreren Stellen in dieser Arbeit dargelegt wurde, viele echte Anwendungen der Differentialrechnung, die mindestens so interessant sind wie eine Kurvendiskussion, welche meist als Anwendung verkauft wird.</p>
</section>
<section id="potential-für-den-informatikunterricht" class="level3" data-number="7.2.4">
<h3 data-number="7.2.4" class="anchored" data-anchor-id="potential-für-den-informatikunterricht"><span class="header-section-number">7.2.4</span> Potential für den Informatikunterricht</h3>
<p>An unserer Schule findet das obligatorische Fach in der 3. und 4. Klasse des Langzeitgymnasiums statt, während die Differentialrechnung im Mathematikunterricht erst in der 5. Klasse behandelt wird. Daher bietet sich die Lerneinheit momentan nur für ein Ergänzungsfach an. Hier bietet sich aber die Gelegenheit, am Beispiel der AD objektorientierte Programmierung einzuführen, und dabei auch noch viele Querverbindungen zum Grundlagenfach Mathematik oder zum Schwerpunktfach zu ziehen.</p>
<p>Mit der anstehenden Weiterentwicklung der gymnasialen Maturtät wird das obligatorische Fach Informatik wohl zum Grundlagenfach erhoben. Es ist daher auch möglich, dass die Stundendotation des Fachs erhöht und bis in die 5. Klasse weitergeführt wird. Dann könnte diese Lerneinheit auch in einem Grundlagenfach Informatik durchgeführt werden.</p>
</section>
<section id="verbesserungen-für-künftige-klassen" class="level3" data-number="7.2.5">
<h3 data-number="7.2.5" class="anchored" data-anchor-id="verbesserungen-für-künftige-klassen"><span class="header-section-number">7.2.5</span> Verbesserungen für künftige Klassen</h3>
<p><a href="intro.html"><span>Kapitel&nbsp;1</span></a> und <a href="ADOneDimManually.html#sec-SadManualImplementation"><span>Kapitel&nbsp;3.1</span></a> legen den Fokus auf die Mathematik und die Anwendungen mit dem Newtonverfahren und der Gradient Descent Methode. <a href="ADOneDimManually.html#sec-SadImplementationOperatorOverloading"><span>Kapitel&nbsp;3.2</span></a> befasst sich mit den programmiertechnischen Aspekten. Dabei habe ich versucht, auf eine ausgewogene Anzahl an Übungsaufgaben in allen Teilen zu achten. Das mag jedoch dazu führen, dass es je nach Zielgruppe zu viele oder zu wenige Übungsaufgaben gibt. Für den mathematischen Teil würde ich mehr Aufgaben zum Zeichnen oder Interpretieren von Computational Graphs anfügen, die auch alle Funktionstypen abdecken, oder beim manuellen Ableiten von Funktionen auch Beispiele für die Quotientenregel ergänzen. Andererseits werden auch “Tricks” wie List Comprehensions in diesem Teil verwendet, etwa im <a href="intro.html#exm-Billard">Beispiel&nbsp;<span>1.2</span></a>, welche Schüler:innen aus dem obligatorischen Fach Informatik nicht bekannt sein dürften. Die Übungen beim Implementieren der Klassen wiederum bieten wenig Abwechslung für Programmierer.</p>
<p>Verschiedene, gekürzte Versionen des Skripts, die besser auf die eine oder andere Zielgruppe zugeschnitten sind, könnte die Lerneinheit als ganzes attraktiver machen. Ausserdem werde ich in einer Version, die ich später im Unterricht einsetze, alle für die Schüler:innen nicht relevanten Teile - wie diese Reflexion - wieder löschen. Für den Einsatz im Immersionsunterricht möchte ich ausserdem die Lerneinheit oder Teile davon zu eine späteren Zeitpunkt noch auf Englisch übersetzen.</p>
</section>
</section>
<section id="was-ich-persönlich-gelernt-habe" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="was-ich-persönlich-gelernt-habe"><span class="header-section-number">7.3</span> Was ich persönlich gelernt habe</h2>
<p>Auch für mich war es das erste Mal, dass ich in der Programmiersprache Python ein grösseres Projekt implementiert habe. Dabei hatte ich auch die Gelegenheit, mich mit <code>matplotlib</code>, <code>numpy</code>, <code>sympy</code> oder <code>pytorch</code> ein wenig vertraut zu machen, obschon ich da bestenfalls an der Oberfläche gekratzt habe. Für das <a href="HigherDimFunctions.html"><span>Kapitel&nbsp;4</span></a> und <a href="aad.html"><span>Kapitel&nbsp;5</span></a> konnte ich einige Konzepte aus der Analysis 2 Vorlesung wieder auffrischen.</p>
<p>Sehr gute Erfahrungen habe ich mit Quarto und dem Erstellen des Skripts in Form einer Website gemacht. Die Lernkurve war anfangs etwas steil, es lassen sich danach aber ansprechende Webseiten mit geringem Aufwand erstellen. Die Kombination von Markdown, Latex und ausführbarem Python Code werde ich auch in Zukunft für die Erstellung von Lerneinheiten einsetzen. In Zeiten von Bring Your Own Device erscheint mir eine Webseite mit interaktiven Elementen zeitgemässer als ein statisches Pdf.</p>
<p>Schliesslich habe ich während dieser Arbeit auch zum ersten Mal intensiv GitHub verwendet, um Fortschritte zu sichern und die Webseite zu veröffentlichen. Das zugehörige GitHub Repository könnte allerdings aufgeräumter sein. Bei Commits sollte ich darauf achten, immer nur Änderungen zu einem Abschnitt oder zu einem Thema einzufügen, aber glücklicherweise musste ich das Projekt nie auf einen früheren Zeitpunkt zurücksetzen. Auf jeden Fall möchte ich die verwendeten Tools auch in künftigen Projekten nicht missen.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Baydin18" class="csl-entry" role="listitem">
Baydin, Atilim Gunes, Barak A. Pearlmutter, Alexey Andreyevich Radul, und Jeffrey Mark Siskind. 2018. <span>„Automatic Differentiation in Machine Learning: a Survey“</span>. <em>Journal of Machine Learning Research</em> 18 (153): 1–43. <a href="http://jmlr.org/papers/v18/17-468.html">http://jmlr.org/papers/v18/17-468.html</a>.
</div>
<div id="ref-Griewank2008EDP" class="csl-entry" role="listitem">
Griewank, Andreas, und Andrea Walther. 2008. <em>Evaluating Derivatives: <span>P</span>rinciples and Techniques of Algorithmic Differentiation</em>. 2. Aufl. Other Titles in Applied Mathematics 105. Philadelphia, PA: SIAM. <a href="http://bookstore.siam.org/ot105/">http://bookstore.siam.org/ot105/</a>.
</div>
<div id="ref-Naumann2012TAo" class="csl-entry" role="listitem">
Naumann, Uwe. 2012. <em>The Art of Differentiating Computer Programs: <span>A</span>n Introduction to Algorithmic Differentiation</em>. Software, Environments, and Tools 24. Philadelphia, PA: SIAM. <a href="http://bookstore.siam.org/se24">http://bookstore.siam.org/se24</a>.
</div>
<div id="ref-PyTorch" class="csl-entry" role="listitem">
Paszke, Adam, Sam Gross, Francisco Massa, Adam Lerer, James Bradbury, Gregory Chanan, Trevor Killeen, u.&nbsp;a. 2019. <span>„PyTorch: An Imperative Style, High-Performance Deep Learning Library“</span>. <em>CoRR</em> abs/1912.01703. <a href="http://arxiv.org/abs/1912.01703">http://arxiv.org/abs/1912.01703</a>.
</div>
<div id="ref-sidsite2021" class="csl-entry" role="listitem">
Radcliffe, Sidney. 2021. <span>„Reverse-mode automatic differentiation from scratch, in Python“</span>. 22. Mai 2021. <a href="https://sidsite.com/posts/autodiff/">https://sidsite.com/posts/autodiff/</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ausblick.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ausblick: Moderne Bibliotheken für automatische Differentiation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">Literaturverzeichnis</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>